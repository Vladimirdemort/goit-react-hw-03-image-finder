{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","components/SearchBar/Searchbar.js","App.js","index.js","components/SearchBar/SearchBar.module.css"],"names":["module","exports","Button","onClick","className","s","type","ImageGalleryItem","key","url","alt","onGetImg","largeImageURL","src","width","ImageGalleryItemImage","modalRoot","document","querySelector","Modal","onCloseByClick","e","target","nodeName","props","onClose","onCloseByKedown","code","console","log","window","addEventListener","this","removeEventListener","createPortal","Overlay","img","Component","ImageGallery","state","mainURL","secondaryURL","imageList","query","page","status","error","showModal","modalImage","loadMore","setState","prev","fetch","then","res","ok","json","Promise","reject","Error","response","hits","catch","toggleModal","setModalImg","prevProps","prevState","prevImage","imageName","nextImage","setTimeout","changedImageName","split","join","map","image","id","webformatURL","tags","length","color","height","timeout","React","Searchbar","handleChange","currentTarget","value","handleSubmit","event","preventDefault","trim","onSubmit","SearchForm","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoomplete","autofocus","placeholder","onChange","App","handleFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ee32813c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3lXiS\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2vBeE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__26ZyM\",\"Modal\":\"Modal_Modal__2gV47\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__tXl3K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2sSmw\"};","import React from 'react';\r\nimport s from './Button.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function Button({ onClick }) {\r\n  return (\r\n    <button className={s.Button} type={'button'} onClick={onClick}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n};\r\n","import React from 'react';\r\nimport s from './ImageGalleryItem.module.css';\r\nimport PropTypes from 'prop-types';\r\nexport default function ImageGalleryItem({\r\n  key,\r\n  url,\r\n  alt,\r\n  onGetImg,\r\n  largeImageURL,\r\n}) {\r\n  return (\r\n    <li\r\n      key={key}\r\n      className={s.ImageGalleryItem}\r\n      onClick={() => {\r\n        onGetImg(largeImageURL, alt);\r\n      }}\r\n    >\r\n      <img\r\n        src={url}\r\n        alt={alt}\r\n        width=\"200\"\r\n        className={s.ImageGalleryItemImage}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  key: PropTypes.number,\r\n  url: PropTypes.string,\r\n  alt: PropTypes.string,\r\n  onGetImg: PropTypes.func,\r\n  largeImageURL: PropTypes.string,\r\n};\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport s from './Modal.module.css';\r\nimport PropTypes from 'prop-types';\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    console.log('componentDidMount');\r\n    window.addEventListener('click', this.onCloseByClick);\r\n    window.addEventListener('keydown', this.onCloseByKedown);\r\n  }\r\n  componentWillUnmount() {\r\n    console.log('componentWillUnmount');\r\n    window.removeEventListener('keydown', this.onCloseByKedown);\r\n  }\r\n  onCloseByClick = e => {\r\n    if (e.target.nodeName === 'DIV') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  onCloseByKedown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  render() {\r\n    const { onGetImg, onClose } = this.props;\r\n    return createPortal(\r\n      <div className={s.Overlay} onClose={onClose}>\r\n        <div className={s.Modal}>\r\n          <img src={onGetImg.img} alt={onGetImg.alt} />\r\n        </div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n\r\nModal.propTypes = {\r\n  onGetImg: PropTypes.object,\r\n  onClose: PropTypes.func,\r\n};\r\n","import Button from 'components/Button/Button';\r\nimport ImageGalleryItem from 'components/ImageGalleryItem/ImageGalleryItem';\r\nimport Modal from 'components/Modal/Modal';\r\nimport React from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport s from './ImageGallery.module.css';\r\n\r\nclass ImageGallery extends React.Component {\r\n  state = {\r\n    mainURL: 'https://pixabay.com/api/',\r\n    secondaryURL: '&image_type=photo&orientation=horizontal&per_page=12',\r\n    key: '23677072-ad1f1d27f5221362a9cf8bc21',\r\n    imageList: [],\r\n    query: '',\r\n    page: 1,\r\n    status: 'idle',\r\n    error: null,\r\n\r\n    showModal: false,\r\n    modalImage: '',\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevImage = prevProps.imageName;\r\n    const nextImage = this.props.imageName;\r\n    if (prevImage !== nextImage) {\r\n      this.setState({ status: 'pending' });\r\n      setTimeout(() => {\r\n        this.setState({ status: 'pending' });\r\n        const changedImageName = nextImage.split(' ').join('+');\r\n        this.setState({ query: changedImageName });\r\n        const { mainURL, secondaryURL, page, key } = this.state;\r\n        fetch(\r\n          `${mainURL}?key=${key}&q=${changedImageName}&${secondaryURL}&page=${page}`,\r\n        )\r\n          .then(res => res.json())\r\n          .then(imageList =>\r\n            this.setState(prev => ({\r\n              imageList: imageList.hits,\r\n              page: prev.page + 1,\r\n              status: 'resolved',\r\n            })),\r\n          );\r\n      }, 1000);\r\n    }\r\n    console.log(this.state.imageList);\r\n  }\r\n\r\n  loadMore = () => {\r\n    this.setState(prev => ({ page: prev.page + 1 }));\r\n\r\n    const { mainURL, secondaryURL, query, page, key } = this.state;\r\n\r\n    fetch(`${mainURL}?q=${query}&page=${page}&key=${key}${secondaryURL}`)\r\n      .then(res => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n\r\n        return Promise.reject(new Error(` Can't find ${query}`));\r\n      })\r\n      .then(response =>\r\n        this.setState(prev => ({\r\n          imageList: [...prev.imageList, ...response.hits],\r\n          status: 'resolved',\r\n        })),\r\n      )\r\n      .catch(error => this.setState({ error }));\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => ({\r\n      showModal: !showModal,\r\n    }));\r\n  };\r\n  setModalImg = (img, alt) => {\r\n    this.setState({ modalImage: { img: img, alt: alt }, showModal: true });\r\n  };\r\n  render() {\r\n    return (\r\n      <>\r\n        <ul className={s.ImageGallery}>\r\n          {this.state.imageList.map(image => {\r\n            const { id, webformatURL, tags, largeImageURL } = image;\r\n            return (\r\n              <>\r\n                <ImageGalleryItem\r\n                  url={webformatURL}\r\n                  key={id}\r\n                  alt={tags}\r\n                  largeImageURL={largeImageURL}\r\n                  onGetImg={this.setModalImg}\r\n                />\r\n              </>\r\n            );\r\n          })}\r\n        </ul>\r\n        {this.state.imageList.length !== 0 && (\r\n          <Button onClick={this.loadMore} />\r\n        )}\r\n        {this.state.status === 'pending' && (\r\n          <Loader\r\n            type=\"Puff\"\r\n            color=\"#00BFFF\"\r\n            height={100}\r\n            width={100}\r\n            timeout={3000}\r\n          />\r\n        )}\r\n        {this.state.showModal && (\r\n          <Modal onGetImg={this.state.modalImage} onClose={this.toggleModal} />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import React from 'react';\r\nimport s from './SearchBar.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Searchbar extends React.Component {\r\n  state = {\r\n    imageName: '',\r\n  };\r\n\r\n  handleChange = e => {\r\n    this.setState({\r\n      imageName: e.currentTarget.value,\r\n    });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    if (this.state.imageName.trim() === '') {\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(this.state.imageName);\r\n    this.setState({\r\n      imageName: '',\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.SearchFormInput}\r\n            type=\"text\"\r\n            autoomplete=\"off\"\r\n            autofocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.imageName}\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.string,\r\n};\r\n","import ImageGallery from 'components/ImageGallery/ImageGallery';\nimport Searchbar from 'components/SearchBar/Searchbar';\nimport React from 'react';\n\nimport './App.css';\n\nclass App extends React.Component {\n  state = {\n    imageName: '',\n  };\n  handleFormSubmit = imageName => {\n    this.setState({ imageName });\n  };\n\n  render() {\n    return (\n      <>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery imageName={this.state.imageName} />\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SearchBar_Searchbar__DEthE\",\"SearchForm\":\"SearchBar_SearchForm__1to5V\",\"SearchFormButton\":\"SearchBar_SearchFormButton__27zqC\",\"SearchFormButtonLabel\":\"SearchBar_SearchFormButtonLabel__1X9Gn\",\"SearchFormInput\":\"SearchBar_SearchFormInput__5T-PZ\"};"],"sourceRoot":""}